<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista de Jogadores</title>
    
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body class="pagina-com-fundo fundo-index">

    <div class="container">
        <h1>Lista de Jogadores</h1>
        <ul id="lista-jogadores" style="list-style: none; padding: 0;">
            </ul>
    </div>

    <script>
        const listaJogadoresElement = document.getElementById('lista-jogadores');

        fetch('/api/jogadores')
            .then(response => response.json())
            .then(jogadores => {
                if (jogadores.length === 0) {
                    listaJogadoresElement.innerHTML = '<li>Nenhum jogador cadastrado ainda.</li>';
                } else {
                    listaJogadoresElement.innerHTML = ''; // Limpa a lista
                    jogadores.forEach(jogador => {
                        const listItem = document.createElement('li');
                        
                        // Estilos para cada item da lista
                        listItem.style.backgroundColor = 'rgba(0,0,0,0.2)';
                        listItem.style.margin = '8px 0';
                        listItem.style.padding = '15px';
                        listItem.style.borderRadius = '5px';
                        
                        // Link do jogador
                        const link = document.createElement('a');
                        link.href = `/inventario/${jogador.id}`;
                        link.style.textDecoration = 'none';
                        link.style.color = '#E0D5C4'; // Cor clara para o texto
                        link.style.fontWeight = 'bold';
                        
                        // --- ALTERAÇÃO PRINCIPAL AQUI ---
                        // Adicionamos display flex para alinhar o ícone e o nome lado a lado
                        link.style.display = 'flex';
                        link.style.alignItems = 'center';

                        // Variável para guardar o HTML do ícone
                        let iconHTML = '';
                        // Verifica se o jogador TEM um ícone
                        if (jogador.icon_url) {
                            // Se tiver, cria a tag da imagem
                            iconHTML = `<img src="${jogador.icon_url}" alt="Ícone" style="width: 24px; height: 24px; margin-right: 10px; border-radius: 4px;">`;
                        }
                        
                        // Monta o conteúdo final do link: o ícone (se existir) + o nome do jogador
                        link.innerHTML = iconHTML + jogador.nome;
                        // --- FIM DA ALTERAÇÃO ---

                        listItem.appendChild(link);
                        listaJogadoresElement.appendChild(listItem);
                    });
                }
            })
            .catch(error => {
                console.error('Erro ao buscar jogadores:', error);
                listaJogadoresElement.innerHTML = '<li>Erro ao carregar jogadores.</li>';
            });
    </script>
</body>
</html>